import{a as le}from"./chunk-WDYYCMKZ.js";import{b as re,c as oe}from"./chunk-QV7T5EUM.js";import{a as ae}from"./chunk-53OKXBOQ.js";import{a as J,b as h}from"./chunk-HC6SFDAR.js";import{a as G}from"./chunk-CBSXQYAH.js";import"./chunk-RE2A7MOP.js";import{U as te,W as w,ca as ie,ea as ne}from"./chunk-KMXPC4HX.js";import{b as Q,d as C,g as X,k as Y,n as Z,v as ee,w as I,x as T}from"./chunk-FYKKZEPL.js";import{c as K}from"./chunk-NEIT6DS5.js";import"./chunk-NNPMHJAH.js";import{i as N}from"./chunk-DSNFU57T.js";import{Aa as R,Ab as y,Eb as c,Kb as _,Ma as $,Mb as j,Nb as P,Ob as D,Pb as r,Qb as o,Rb as m,Vb as L,Y as A,Yb as u,Zb as f,b as F,ca as O,eb as q,ha as B,hc as d,ic as v,jb as s,kb as g,lc as x,mc as S,nc as M,oa as b,pc as k,qb as H,vc as z,wc as W,za as U}from"./chunk-2NZAWTBJ.js";import{a as V}from"./chunk-EQDQRRRY.js";var de=(()=>{class t{constructor(e,n){this.data=e,this._FormBuilder=n}ngOnInit(){console.log(this.data),this.form=this._FormBuilder.group({name:[this.data.name,[C.required]],gender:[this.data.gender,[C.required]],email:[this.data.email,[C.required,C.email]],birthday:[this.data.birthday,[C.required]]})}static{this.\u0275fac=function(n){return new(n||t)(g(re),g(ee))}}static{this.\u0275cmp=b({type:t,selectors:[["app-user-form"]],standalone:!0,features:[k],decls:5,vars:0,consts:[[1,"p-5"],[1,"inner","grid","grid-cols-12"],[1,"col-span-12","md:col-span-6"]],template:function(n,i){n&1&&(r(0,"section",0)(1,"div",1),m(2,"div",2)(3,"div",2)(4,"div",2),o()())},dependencies:[I,T,ne,ie,w]})}}return t})();var me=(()=>{class t{constructor(e,n){this._HttpClient=e,this._CookieService=n}getAll(e=1,n=10,i=void 0,l=void 0){return this._HttpClient.get(h.baseUrl+`user?page=${e}&limit=${n}${i!=null?"&sort="+i:""}${l!=null?"&gender="+l:""}`,{headers:{Authorization:"Bearer "+this._CookieService.get(h.token),lang:localStorage.getItem("lang")??"en"}})}getUser(e){return this._HttpClient.get(h.baseUrl+"user/"+e,{headers:{Authorization:"Bearer "+this._CookieService.get(h.token),lang:localStorage.getItem("lang")??"en"}})}block(e){return this._HttpClient.patch(h.baseUrl+"user/blockUser/"+e,null,{headers:{Authorization:"Bearer "+this._CookieService.get(h.token),lang:localStorage.getItem("lang")??"en"}})}static{this.\u0275fac=function(n){return new(n||t)(B(G),B(J))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ge(t,p){if(t&1&&m(0,"img",36),t&2){let e=f(2).$implicit;c("alt",e.name+" image")}}function ue(t,p){if(t&1&&m(0,"img",37),t&2){let e=f(2).$implicit;c("alt",e.name+" image")}}function fe(t,p){if(t&1&&y(0,ge,1,1,"img",36)(1,ue,1,1,"img",37),t&2){let e=f().$implicit;_(e.gender=="male"?0:-1),s(),_(e.gender=="female"?1:-1)}}function _e(t,p){if(t&1&&m(0,"img",27),t&2){let e=f().$implicit;c("src",e.profileImg,q)("alt",e.name+" image")}}function he(t,p){t&1&&m(0,"i",33)}function Ce(t,p){t&1&&(r(0,"span"),d(1,"_"),o())}function ve(t,p){if(t&1){let e=L();r(0,"tr",19),m(1,"td",18),r(2,"td",18)(3,"figure",26),y(4,fe,2,2)(5,_e,1,2,"img",27),o()(),r(6,"td",28)(7,"div",29)(8,"h3",30),d(9),o(),r(10,"span",31),d(11),o(),r(12,"span",31),d(13),o()()(),r(14,"td",32),y(15,he,1,0,"i",33)(16,Ce,2,0,"span"),o(),r(17,"td",32)(18,"button",34),u("click",function(){let i=U(e).$implicit,l=f();return R(l.update(i))}),d(19,"Update"),o()(),r(20,"td",32)(21,"button",35),u("click",function(){let i=U(e).$implicit,l=f();return R(l.block(i.id))}),d(22,"Block"),o()()()}if(t&2){let e=p.$implicit;s(4),_(e.profileImg==null?4:-1),s(),_(e.profileImg!=null?5:-1),s(4),v(e.name),s(2),v(e.email),s(2),v(e.phone),s(2),_(e.accountActive?15:-1),s(),_(e.accountActive?-1:16)}}function be(t,p){if(t&1&&(r(0,"span",24),d(1),o()),t&2){let e=p.$implicit,n=f();c("ngClass",e==n.pagination.currentPage?"font-bold":""),s(),v(e)}}var Ve=(()=>{class t{constructor(e,n,i,l,a){this._UserService=e,this._MatDialog=n,this._ToastrService=i,this._Renderer2=l,this._ElementRef=a,this.users=[],this.pages=[]}ngOnInit(){this.getAll()}toggleMenu(){let e=this._ElementRef.nativeElement.querySelector("#client-genders-menu");e.classList.contains("hidden")?(this._Renderer2.addClass(e,"opacity-0"),this._Renderer2.removeClass(e,"hidden"),setTimeout(()=>{this._Renderer2.removeClass(e,"translate-y-4"),this._Renderer2.addClass(e,"translate-y-2"),this._Renderer2.removeClass(e,"opacity-0")},10)):(this._Renderer2.addClass(e,"opacity-0"),this._Renderer2.removeClass(e,"translate-y-2"),this._Renderer2.addClass(e,"translate-y-4"),setTimeout(()=>{this._Renderer2.addClass(e,"hidden"),this._Renderer2.removeClass(e,"opacity-0")},200))}genderChanged(){this.getAll(1,10,void 0,this.gender)}getAll(e=1,n=10,i=void 0,l=void 0){this._UserService.getAll(e,n,i,l).pipe(A(a=>{this.users=a.data.users,this.pagination=a.data.pagination,this.pages=[];for(let E=1;E<=this.pagination.numbersOfPages;E++)this.pages.push(E)})).subscribe(F,a=>console.log(a))}update(e){this._MatDialog.open(de,{data:V({},e)}).afterClosed().subscribe(i=>{i=="updated"?this._ToastrService.success(localStorage.getItem("lang")?.includes("en")?"User updated successfully":"\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"):this._ToastrService.error(localStorage.getItem("lang")?.includes("en")?"Nothing updated":"\u0644\u0645 \u064A\u062A\u0645 \u0627\u062A\u0645\u0627\u0645 \u0627\u0644\u0639\u0645\u0644\u064A\u0629")})}block(e){this._MatDialog.open(le,{data:{message:localStorage.getItem("lang")?.includes("en")?"Are you sure to block the user?":"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0638\u0631 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u061F"}}).afterClosed().subscribe(i=>{i&&this.blockUser(e)})}next(){this.pagination.currentPage<this.pagination.numbersOfPages&&this.getAll(this.pagination.currentPage+1)}prev(){this.pagination.currentPage>1&&this.getAll(this.pagination.currentPage-1)}blockUser(e){this._UserService.block(e).pipe(A(n=>{console.log(n),this._ToastrService.success(localStorage.getItem("lang")?.includes("en")?"Blocked user successfully":"\u062A\u0645 \u062D\u0638\u0631 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0628\u0646\u062C\u0627\u062D")})).subscribe(F,n=>console.log(n))}static{this.\u0275fac=function(n){return new(n||t)(g(me),g(oe),g(ae),g(H),g($))}}static{this.\u0275cmp=b({type:t,selectors:[["app-clients"]],standalone:!0,features:[k],decls:50,vars:14,consts:[[1,"container","mx-auto","grid","grid-cols-12","gap-5"],[1,"col-span-12"],[1,"flex","justify-between","items-center"],[1,"grow"],[1,"relative","size-12","border","border-gray-400","rounded-full",3,"click"],[1,"pi","pi-filter","text-lg","text-gray-400"],["id","client-genders-menu",1,"rounded-md","overflow-hidden","bg-white","shadow-md","absolute","z-50","top-full","translate-y-4","hidden","duration-200","rtl:left-0","ltr:right-0","w-32"],[1,"text-end"],[1,"p-2","hover:bg-gray-100","duration-200"],["id","all","type","radio",1,"hidden","peer/gender",3,"ngModelChange","ngModel","value"],["for","all",1,"block","size-full","cursor-pointer","peer-checked/gender:text-blue-800"],["id","male","type","radio",1,"hidden","peer/gender",3,"ngModelChange","ngModel","value"],["for","male",1,"block","size-full","cursor-pointer","peer-checked/gender:text-blue-800"],["id","female","type","radio",1,"hidden","peer/gender",3,"ngModelChange","ngModel","value"],["for","female",1,"block","size-full","cursor-pointer","peer-checked/gender:text-blue-800"],[1,"w-full"],[1,"bg-gray-100","font-bold","border-b"],[1,"p-4","border-b","text-start"],[1,"p-4","border-b"],[1,"hover:bg-gray-100","duration-100"],["colspan","6",1,"p-4"],[1,"cont","flex","justify-between","items-center"],[1,"inner","flex","items-center","gap-2","text-xl"],[1,"pi","pi-angle-right","text-xl","rtl:rotate-0","ltr:rotate-180","disabled:text-gray-400",3,"click","disabled","title"],[3,"ngClass"],[1,"pi","pi-angle-left","text-xl","rtl:rotate-0","ltr:rotate-180","disabled:text-gray-400",3,"click","disabled","title"],[1,"size-16","rounded-full","overflow-hidden"],[1,"w-full",3,"src","alt"],[1,"p-4","border-b","flex","gap-5"],[1,"main-info","flex","flex-col"],[1,"text-lg","font-bold","tracking-tight","mb-2"],[1,"text-gray-400"],[1,"p-4","border-b","text-center"],[1,"pi","pi-verified","text-lg","text-blue-800"],["mat-flat-button","",3,"click"],["mat-flat-button","","color","warn",3,"click"],["src","male.png",1,"w-full",3,"alt"],["src","female.png",1,"w-full",3,"alt"]],template:function(n,i){n&1&&(r(0,"section")(1,"div",0)(2,"div",1)(3,"div",2),m(4,"div",3),r(5,"button",4),u("click",function(){return i.toggleMenu()}),m(6,"i",5),r(7,"div",6)(8,"ul",7)(9,"li",8)(10,"input",9),M("ngModelChange",function(a){return S(i.gender,a)||(i.gender=a),a}),u("ngModelChange",function(){return i.genderChanged()}),o(),r(11,"label",10),d(12,"All"),o()(),r(13,"li",8)(14,"input",11),M("ngModelChange",function(a){return S(i.gender,a)||(i.gender=a),a}),u("ngModelChange",function(){return i.genderChanged()}),o(),r(15,"label",12),d(16,"Male"),o()(),r(17,"li",8)(18,"input",13),M("ngModelChange",function(a){return S(i.gender,a)||(i.gender=a),a}),u("ngModelChange",function(){return i.genderChanged()}),o(),r(19,"label",14),d(20,"Female"),o()()()()()()(),r(21,"div",1)(22,"table",15)(23,"thead")(24,"tr",16),m(25,"th",17),r(26,"th",17),d(27,"Image"),o(),r(28,"th",17),d(29,"User Info"),o(),r(30,"th",18),d(31,"Account Activated"),o(),r(32,"th",18),d(33,"Update"),o(),r(34,"th",18),d(35,"Block"),o()()(),r(36,"tbody"),P(37,ve,23,7,"tr",19,j),o(),r(39,"tfoot")(40,"tr")(41,"td",20)(42,"div",21)(43,"div",22)(44,"button",23),z(45,"translate"),u("click",function(){return i.next()}),o(),P(46,be,2,2,"span",24,j),r(48,"button",25),z(49,"translate"),u("click",function(){return i.prev()}),o()()()()()()()()()()),n&2&&(s(10),x("ngModel",i.gender),c("value",void 0),s(4),x("ngModel",i.gender),c("value","male"),s(4),x("ngModel",i.gender),c("value","female"),s(19),D(i.users),s(7),c("disabled",i.pagination.currentPage==i.pagination.numbersOfPages)("title",W(45,10,"product.next-page")),s(2),D(i.pages),s(2),c("disabled",i.pagination.currentPage==1)("title",W(49,12,"product.prev-page")))},dependencies:[w,te,K,N,I,Q,Z,X,Y,T]})}}return t})();export{Ve as ClientsComponent};
