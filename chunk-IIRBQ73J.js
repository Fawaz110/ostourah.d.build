import{b as ae,c as le,d as V}from"./chunk-QPDFXP63.js";import{a as se}from"./chunk-53OKXBOQ.js";import{a as Q,b as C}from"./chunk-HC6SFDAR.js";import{a as K}from"./chunk-CBSXQYAH.js";import"./chunk-QXZ4US6X.js";import{U as ne,W as A,ca as re,ea as oe}from"./chunk-66PR75DQ.js";import{b as Y,d as y,g as Z,k as ee,n as te,u as ie,v as E,w as F}from"./chunk-AOPDOOJR.js";import{c as X}from"./chunk-NEIT6DS5.js";import"./chunk-NNPMHJAH.js";import{i as J}from"./chunk-DSNFU57T.js";import{Aa as P,Ab as M,Eb as c,Kb as b,Ma as $,Mb as D,Nb as z,Ob as W,Pb as r,Qb as o,Rb as p,Vb as N,Y as S,Yb as h,Zb as v,b as x,ca as O,eb as q,ha as R,hc as d,ic as m,jb as a,kb as _,kc as G,lc as I,mc as T,nc as w,oa as k,pc as B,qb as L,vc as u,wc as g,za as j}from"./chunk-2NZAWTBJ.js";import{a as H}from"./chunk-EQDQRRRY.js";var ce=(()=>{class i{constructor(e,n){this.data=e,this._FormBuilder=n}ngOnInit(){console.log(this.data),this.form=this._FormBuilder.group({name:[this.data.name,[y.required]],gender:[this.data.gender,[y.required]],email:[this.data.email,[y.required,y.email]],birthday:[this.data.birthday,[y.required]]})}static{this.\u0275fac=function(n){return new(n||i)(_(ae),_(ie))}}static{this.\u0275cmp=k({type:i,selectors:[["app-user-form"]],standalone:!0,features:[B],decls:5,vars:0,consts:[[1,"p-5"],[1,"inner","grid","grid-cols-12"],[1,"col-span-12","md:col-span-6"]],template:function(n,t){n&1&&(r(0,"section",0)(1,"div",1),p(2,"div",2)(3,"div",2)(4,"div",2),o()())},dependencies:[E,F,oe,re,A]})}}return i})();var pe=(()=>{class i{constructor(e,n){this._HttpClient=e,this._CookieService=n}getAll(e=1,n=10,t=void 0,l=void 0){return this._HttpClient.get(C.baseUrl+`user?page=${e}&limit=${n}${t!=null?"&sort="+t:""}${l!=null?"&gender="+l:""}`,{headers:{Authorization:"Bearer "+this._CookieService.get(C.token),lang:localStorage.getItem("lang")??"en"}})}getUser(e){return this._HttpClient.get(C.baseUrl+"user/"+e,{headers:{Authorization:"Bearer "+this._CookieService.get(C.token),lang:localStorage.getItem("lang")??"en"}})}block(e){return this._HttpClient.patch(C.baseUrl+"user/blockUser/"+e,null,{headers:{Authorization:"Bearer "+this._CookieService.get(C.token),lang:localStorage.getItem("lang")??"en"}})}unblock(e){return this._HttpClient.patch(C.baseUrl+"user/activeUser/"+e,{},{headers:{Authorization:"Bearer "+this._CookieService.get(C.token),lang:localStorage.getItem("lang")??"en"}})}static{this.\u0275fac=function(n){return new(n||i)(R(K),R(Q))}}static{this.\u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function ge(i,f){if(i&1&&p(0,"img",37),i&2){let e=v(2).$implicit;c("alt",e.name+" image")}}function fe(i,f){if(i&1&&p(0,"img",38),i&2){let e=v(2).$implicit;c("alt",e.name+" image")}}function _e(i,f){if(i&1&&M(0,ge,1,1,"img",37)(1,fe,1,1,"img",38),i&2){let e=v().$implicit;b(e.gender=="male"?0:-1),a(),b(e.gender=="female"?1:-1)}}function he(i,f){if(i&1&&p(0,"img",28),i&2){let e=v().$implicit;c("src",e.profileImg,q)("alt",e.name+" image")}}function Ce(i,f){i&1&&p(0,"i",34)}function ve(i,f){i&1&&(r(0,"span"),d(1,"_"),o())}function be(i,f){if(i&1){let e=N();r(0,"tr",20),p(1,"td",19),r(2,"td",19)(3,"figure",27),M(4,_e,2,2)(5,he,1,2,"img",28),o()(),r(6,"td",29)(7,"div",30)(8,"h3",31),d(9),o(),r(10,"span",32),d(11),o(),r(12,"span",32),d(13),o()()(),r(14,"td",33),M(15,Ce,1,0,"i",34)(16,ve,2,0,"span"),o(),r(17,"td",33)(18,"button",35),h("click",function(){let t=j(e).$implicit,l=v();return P(l.update(t))}),d(19),u(20,"translate"),o()(),r(21,"td",33)(22,"button",36),h("click",function(){let t=j(e).$implicit,l=v();return P(t.haveBlock?l.unblock(t.id):l.block(t.id))}),d(23),u(24,"translate"),o()()()}if(i&2){let e=f.$implicit;a(4),b(e.profileImg==null?4:-1),a(),b(e.profileImg!=null?5:-1),a(4),m(e.name),a(2),m(e.email),a(2),m(e.phone),a(2),b(e.accountActive?15:-1),a(),b(e.accountActive?-1:16),a(3),m(g(20,10,"clients.update")),a(3),c("color",e.haveBlock?"accent":"warn"),a(),m(g(24,12,e.haveBlock?"clients.unblock":"clients.block"))}}function ye(i,f){if(i&1&&(r(0,"span",25),d(1),o()),i&2){let e=f.$implicit,n=v();c("ngClass",e==n.pagination.currentPage?"font-bold":""),a(),m(e)}}var He=(()=>{class i{constructor(e,n,t,l,s){this._UserService=e,this._MatDialog=n,this._ToastrService=t,this._Renderer2=l,this._ElementRef=s,this.users=[],this.pages=[]}ngOnInit(){this.getAll()}toggleMenu(){let e=this._ElementRef.nativeElement.querySelector("#client-genders-menu");e.classList.contains("hidden")?(this._Renderer2.addClass(e,"opacity-0"),this._Renderer2.removeClass(e,"hidden"),setTimeout(()=>{this._Renderer2.removeClass(e,"translate-y-4"),this._Renderer2.addClass(e,"translate-y-2"),this._Renderer2.removeClass(e,"opacity-0")},10)):(this._Renderer2.addClass(e,"opacity-0"),this._Renderer2.removeClass(e,"translate-y-2"),this._Renderer2.addClass(e,"translate-y-4"),setTimeout(()=>{this._Renderer2.addClass(e,"hidden"),this._Renderer2.removeClass(e,"opacity-0")},200))}genderChanged(){this.getAll(1,10,void 0,this.gender)}getAll(e=1,n=10,t=void 0,l=void 0){this._UserService.getAll(e,n,t,l).pipe(S(s=>{this.users=s.data.users,this.pagination=s.data.pagination,this.pages=[];for(let U=1;U<=this.pagination.numbersOfPages;U++)this.pages.push(U)})).subscribe(x,s=>console.log(s))}update(e){this._MatDialog.open(ce,{data:H({},e)}).afterClosed().subscribe(t=>{t=="updated"?this._ToastrService.success(localStorage.getItem("lang")?.includes("en")?"User updated successfully":"\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"):this._ToastrService.error(localStorage.getItem("lang")?.includes("en")?"Nothing updated":"\u0644\u0645 \u064A\u062A\u0645 \u0627\u062A\u0645\u0627\u0645 \u0627\u0644\u0639\u0645\u0644\u064A\u0629")})}block(e){this._MatDialog.open(V,{data:{message:localStorage.getItem("lang")?.includes("en")?"Are you sure to block the user?":"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0638\u0631 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u061F"}}).afterClosed().subscribe(t=>{t&&this.blockUser(e)})}unblock(e){this._MatDialog.open(V,{data:{message:localStorage.getItem("lang")?.includes("en")?"Are you sure to unblock the user?":"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0627\u0644\u063A\u0627\u0621 \u062D\u0638\u0631 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u061F"}}).afterClosed().subscribe(t=>{t&&this.unblockUser(e)})}unblockUser(e){this._UserService.unblock(e).pipe(S(n=>{this.getAll(),this._ToastrService.success(localStorage.getItem("lang")?.includes("en")?"Unblocked user successfully":"\u062A\u0645 \u0627\u0644\u063A\u0627\u0621 \u062D\u0638\u0631 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0628\u0646\u062C\u0627\u062D")})).subscribe(x,n=>console.log(n))}next(){this.pagination.currentPage<this.pagination.numbersOfPages&&this.getAll(this.pagination.currentPage+1)}prev(){this.pagination.currentPage>1&&this.getAll(this.pagination.currentPage-1)}blockUser(e){this._UserService.block(e).pipe(S(n=>{this.getAll(),this._ToastrService.success(localStorage.getItem("lang")?.includes("en")?"Blocked user successfully":"\u062A\u0645 \u062D\u0638\u0631 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0628\u0646\u062C\u0627\u062D")})).subscribe(x,n=>console.log(n))}static{this.\u0275fac=function(n){return new(n||i)(_(pe),_(le),_(se),_(L),_($))}}static{this.\u0275cmp=k({type:i,selectors:[["app-clients"]],standalone:!0,features:[B],decls:56,vars:32,consts:[[1,"container","mx-auto","grid","grid-cols-12","gap-5"],[1,"col-span-12"],[1,"flex","justify-between","items-center"],[1,"grow"],[1,"relative","size-12","border","border-gray-400","rounded-full",3,"click"],[1,"pi","pi-filter","text-lg","text-gray-400"],["id","client-genders-menu",1,"rounded-md","overflow-hidden","bg-white","shadow-md","absolute","z-50","top-full","translate-y-4","hidden","duration-200","rtl:left-0","ltr:right-0","w-32"],[1,"text-end"],[1,"p-2","hover:bg-gray-100","duration-200"],["id","all","type","radio",1,"hidden","peer/gender",3,"ngModelChange","ngModel","value"],["for","all",1,"block","size-full","cursor-pointer","peer-checked/gender:text-blue-800"],["id","male","type","radio",1,"hidden","peer/gender",3,"ngModelChange","ngModel","value"],["for","male",1,"block","size-full","cursor-pointer","peer-checked/gender:text-blue-800"],["id","female","type","radio",1,"hidden","peer/gender",3,"ngModelChange","ngModel","value"],["for","female",1,"block","size-full","cursor-pointer","peer-checked/gender:text-blue-800"],[1,"col-span-12","overflow-y-auto"],[1,"w-full"],[1,"bg-gray-100","font-bold","border-b"],[1,"p-4","border-b","text-start"],[1,"p-4","border-b"],[1,"hover:bg-gray-100","duration-100"],["colspan","6",1,"p-4"],[1,"cont","flex","justify-between","items-center"],[1,"inner","flex","items-center","gap-2","text-xl"],[1,"pi","pi-angle-right","text-xl","rtl:rotate-0","ltr:rotate-180","disabled:text-gray-400",3,"click","disabled","title"],[3,"ngClass"],[1,"pi","pi-angle-left","text-xl","rtl:rotate-0","ltr:rotate-180","disabled:text-gray-400",3,"click","disabled","title"],[1,"size-16","rounded-full","overflow-hidden"],[1,"w-full",3,"src","alt"],[1,"p-4","border-b","flex","gap-5"],[1,"main-info","flex","flex-col"],[1,"text-lg","font-bold","tracking-tight","mb-2"],[1,"text-gray-400"],[1,"p-4","border-b","text-center"],[1,"pi","pi-verified","text-lg","text-blue-800"],["mat-flat-button","",3,"click"],["mat-flat-button","",3,"click","color"],["src","male.png",1,"w-full",3,"alt"],["src","female.png",1,"w-full",3,"alt"]],template:function(n,t){n&1&&(r(0,"section")(1,"div",0)(2,"div",1)(3,"div",2),p(4,"div",3),r(5,"button",4),h("click",function(){return t.toggleMenu()}),p(6,"i",5),r(7,"div",6)(8,"ul",7)(9,"li",8)(10,"input",9),w("ngModelChange",function(s){return T(t.gender,s)||(t.gender=s),s}),h("ngModelChange",function(){return t.genderChanged()}),o(),r(11,"label",10),d(12,"All"),o()(),r(13,"li",8)(14,"input",11),w("ngModelChange",function(s){return T(t.gender,s)||(t.gender=s),s}),h("ngModelChange",function(){return t.genderChanged()}),o(),r(15,"label",12),d(16,"Male"),o()(),r(17,"li",8)(18,"input",13),w("ngModelChange",function(s){return T(t.gender,s)||(t.gender=s),s}),h("ngModelChange",function(){return t.genderChanged()}),o(),r(19,"label",14),d(20,"Female"),o()()()()()()(),r(21,"div",15)(22,"table",16)(23,"thead")(24,"tr",17),p(25,"th",18),r(26,"th",18),d(27),u(28,"translate"),o(),r(29,"th",18),d(30),u(31,"translate"),o(),r(32,"th",19),d(33),u(34,"translate"),o(),r(35,"th",19),d(36),u(37,"translate"),o(),r(38,"th",19),d(39),u(40,"translate"),u(41,"translate"),o()()(),r(42,"tbody"),z(43,be,25,14,"tr",20,D),o(),r(45,"tfoot")(46,"tr")(47,"td",21)(48,"div",22)(49,"div",23)(50,"button",24),u(51,"translate"),h("click",function(){return t.next()}),o(),z(52,ye,2,2,"span",25,D),r(54,"button",26),u(55,"translate"),h("click",function(){return t.prev()}),o()()()()()()()()()()),n&2&&(a(10),I("ngModel",t.gender),c("value",void 0),a(4),I("ngModel",t.gender),c("value","male"),a(4),I("ngModel",t.gender),c("value","female"),a(9),m(g(28,16,"clients.image")),a(3),m(g(31,18,"clients.user-info")),a(3),m(g(34,20,"clients.account-activated")),a(3),m(g(37,22,"clients.update")),a(3),G("",g(40,24,"clients.block")," / ",g(41,26,"clients.unblock"),""),a(4),W(t.users),a(7),c("disabled",t.pagination.currentPage==t.pagination.numbersOfPages)("title",g(51,28,"product.next-page")),a(2),W(t.pages),a(2),c("disabled",t.pagination.currentPage==1)("title",g(55,30,"product.prev-page")))},dependencies:[A,ne,X,J,E,Y,te,Z,ee,F]})}}return i})();export{He as ClientsComponent};
