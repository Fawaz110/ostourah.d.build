import{a as ge,b as he}from"./chunk-ZZD5U5EC.js";import{a as ue,b as fe}from"./chunk-QPDFXP63.js";import{b as V}from"./chunk-6YXA2VOV.js";import{a as D,b as m}from"./chunk-HC6SFDAR.js";import{a as x}from"./chunk-CBSXQYAH.js";import{a as pe,b as me}from"./chunk-272GPUIN.js";import{P as ie,U as re,W as oe,Y as ne,Z as ae,ba as le,ca as de,da as ce,ea as se}from"./chunk-66PR75DQ.js";import{b as G,d as u,g as R,h as O,l as L,m as W,p as J,q as K,r as X,s as Y,u as Z,v as ee,w as te}from"./chunk-AOPDOOJR.js";import{c as Q,d as z}from"./chunk-NEIT6DS5.js";import{k as U}from"./chunk-DSNFU57T.js";import{Aa as B,Ab as y,Eb as p,Mb as A,Nb as $,Ob as j,Pb as d,Qb as n,Rb as S,Vb as M,Y as w,Yb as F,Zb as q,b as P,ca as E,ha as C,hc as c,ic as s,jb as r,jc as H,kb as v,oa as T,pc as N,ub as I,vc as a,wc as l,za as k}from"./chunk-2NZAWTBJ.js";var _e=(()=>{class e{constructor(t,o){this._HttpClient=t,this._CookieService=o}getProductsWithFilterations(t,o,i,f=1,g=10){return this._HttpClient.get(m.baseUrl+`product/filter?limit=${g}&page=${f}&category=${t}&subCategory=${o}&subSubCategory=${i}`,{headers:{lang:localStorage.getItem("lang")??"en"}})}getAll(){return this._HttpClient.get(m.baseUrl+"category",{headers:{Authorization:"Bearer "+this._CookieService.get(m.token),lang:localStorage.getItem("lang")??"en"}})}add(t){return this._HttpClient.post(m.baseUrl+"category",t,{headers:{Authorization:"Bearer "+this._CookieService.get(m.token),lang:localStorage.getItem("lang")??"en",enctype:"multipart/form-data"}})}addSubCategory(t,o){return this._HttpClient.post(m.baseUrl+"subCategory/"+t,o,{headers:{Authorization:"Bearer "+this._CookieService.get(m.token),lang:localStorage.getItem("lang")??"en"}})}addSubSubCategory(t,o){return this._HttpClient.post(m.baseUrl+"subSubCategory/"+t,o,{headers:{Authorization:"Bearer "+this._CookieService.get(m.token),lang:localStorage.getItem("lang")??"en"}})}delete(t){return this._HttpClient.delete(m.baseUrl+"category/"+t,{headers:{Authorization:"Bearer "+this._CookieService.get(m.token),lang:localStorage.getItem("lang")??"en"}})}static{this.\u0275fac=function(o){return new(o||e)(C(x),C(D))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ve=(()=>{class e{constructor(t){this._HttpClient=t}getAll(t=1,o=10,i=void 0){return this._HttpClient.get(m.baseUrl+`product?page=${t}&limit=${o}
      ${i!=null?"&sort="+i:""}`,{headers:{lang:localStorage.getItem("lang")??"en",currency:"USD"}})}getProductDetails(t){return this._HttpClient.get(m.baseUrl+`product/${t}`,{headers:{lang:localStorage.getItem("lang")??"en",currency:"USD"}})}deleteProduct(t){return this._HttpClient.delete(m.baseUrl+`product/${t}`)}getWithFilters(t=1,o=10,i=void 0,f=0,g=void 0,b=void 0,_=void 0){return this._HttpClient.get(m.baseUrl+`product/filter?
      limit=${o}
      ${b!=null?"&price[lt]="+b:""}
      ${_!=null?"&price[gt]="+_:""}
      ${g!=null?"&discount="+g:""}
      ${f!=0?"&rate[gte]="+f:""}
      ${i!=null?"&category="+i:""}
      &page=${t}`)}static{this.\u0275fac=function(o){return new(o||e)(C(x))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Se(e,h){e&1&&(d(0,"mat-error"),c(1),a(2,"translate"),n()),e&2&&(r(),s(l(2,1,"form.error.required")))}function Fe(e,h){if(e&1&&(d(0,"mat-option",10),c(1),n()),e&2){let t=h.$implicit;p("value",t.title),r(),s(t.title)}}function Ee(e,h){e&1&&(d(0,"mat-error"),c(1),a(2,"translate"),n()),e&2&&(r(),s(l(2,1,"form.error.required")))}function xe(e,h){e&1&&(d(0,"mat-error"),c(1),a(2,"translate"),n()),e&2&&(r(),s(l(2,1,"form.error.required")))}function ke(e,h){e&1&&(d(0,"mat-error"),c(1),a(2,"translate"),n()),e&2&&(r(),s(l(2,1,"form.error.required")))}function Be(e,h){e&1&&(d(0,"div",13)(1,"mat-checkbox",20),c(2),a(3,"translate"),n()()),e&2&&(r(),p("checked",!0),r(),H(" ",l(3,2,"form.qty.label")," "))}function Me(e,h){if(e&1){let t=M();d(0,"button",21),F("click",function(){k(t);let i=q();return B(i.toggleEdit())}),c(1),a(2,"translate"),n()}e&2&&(r(),s(l(2,1,"form.btn.update")))}function qe(e,h){e&1&&(d(0,"button",22),c(1),a(2,"translate"),n()),e&2&&(r(),s(l(2,1,"form.btn.confirm")))}function Pe(e,h){if(e&1){let t=M();d(0,"button",23),F("click",function(){k(t);let i=q();return B(i.cancel())}),c(1),a(2,"translate"),n()}e&2&&(r(),s(l(2,1,"form.btn.cancel")))}var ot=(()=>{class e{constructor(t,o,i,f,g,b){this._FormBuilder=t,this._MatDialogRef=o,this._CategoryService=i,this.data=f,this._Router=g,this._ProductService=b,this.categories=[],this.path=this._Router.url,this.editQtyEnabled=I(this.path!="/products"),this.editEnabled=I(this.path=="/products")}ngOnInit(){console.log("data: ",this.data),this.buildForm(this.path),this.getAllCategories()}selectChanged(){console.log("changed")}getAllCategories(){this._CategoryService.getAll().pipe(w(t=>{this.categories=t.data.categories})).subscribe(P,t=>console.log(t))}buildForm(t){switch(t){case"/products":this.buildProductForm();break;case"/inventory":this.buildInventoryForm();break}}buildProductForm(){this.productForm=this._FormBuilder.group({id:[this.data.id,[u.required]],title:[this.data.title,[u.required]],description:[this.data.description,[u.required]],category:[this.data.category,[u.required]],price:[this.data.price,[u.required]],discount:[this.data.discount,[u.required]]})}buildInventoryForm(){this.productForm=this._FormBuilder.group({id:[this.data.id,[u.required]],title:[this.data.title,[u.required]],description:[this.data.description,[u.required]],category:[this.data.category,[u.required]],price:[this.data.price,[u.required]],discount:[this.data.discount,[u.required]],isAvailable:[this.data.isAvailable,[u.required]]})}toggleEdit(){this.path=="/inventory"?(console.log("enabled from inventory"),this.editQtyEnabled=I(!this.editQtyEnabled())):(console.log("enabled from products"),this.editEnabled=I(!this.editEnabled()))}cancel(){console.log("cance")}submit(){console.log("form value: ",this.productForm.value),console.log("path: ",this.path)}static{this.\u0275fac=function(o){return new(o||e)(v(Z),v(ue),v(_e),v(fe),v(V),v(ve))}}static{this.\u0275cmp=T({type:e,selectors:[["app-product-form"]],standalone:!0,features:[N],decls:53,vars:47,consts:[[1,"p-5","text-white"],[1,"text-xl","font-bold","mb-3"],[3,"ngSubmit","formGroup"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-12","md:col-span-6"],[1,"w-full"],["matInput","","type","text","formControlName","title","readonly","",3,"readonly","placeholder"],[4,"ngIf"],[1,"w-full","bg-transparent"],["formControlName","category","name","food",3,"ngModelChange","disabled","placeholder"],[3,"value"],["matInput","","type","number","min","0","formControlName","price","step","1","readonly","",3,"readonly","placeholder"],["matInput","","type","number","min","0","max","100","formControlName","discount","step","0.1","readonly","",3,"readonly","placeholder"],[1,"col-span-12"],["matInput","","readonly","","formControlName","description",3,"readonly","placeholder"],["class","col-span-12",4,"ngIf"],[1,"inner","flex","items-center","gap-2","flex-wrap"],["type","button","class","max-md:w-full","mat-flat-button","",3,"click",4,"ngIf"],["type","submit","class","max-md:w-full","mat-stroked-button","",4,"ngIf"],["type","button","class","max-md:w-full","mat-raised-button","",3,"click",4,"ngIf"],["color","primary","formControlName","",1,"example-margin",3,"checked"],["type","button","mat-flat-button","",1,"max-md:w-full",3,"click"],["type","submit","mat-stroked-button","",1,"max-md:w-full"],["type","button","mat-raised-button","",1,"max-md:w-full",3,"click"]],template:function(o,i){if(o&1&&(d(0,"section",0)(1,"h2",1),c(2),a(3,"translate"),n(),d(4,"form",2),F("ngSubmit",function(){return i.submit()}),d(5,"div",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),c(9),a(10,"translate"),n(),S(11,"input",6),a(12,"translate"),y(13,Se,3,3,"mat-error",7),n()(),d(14,"div",4)(15,"mat-form-field",8)(16,"mat-label"),c(17),a(18,"translate"),n(),d(19,"mat-select",9),a(20,"translate"),F("ngModelChange",function(){return i.selectChanged()}),$(21,Fe,2,2,"mat-option",10,A),n()()(),d(23,"div",4)(24,"mat-form-field",5)(25,"mat-label"),c(26),a(27,"translate"),n(),S(28,"input",11),a(29,"translate"),y(30,Ee,3,3,"mat-error",7),n()(),d(31,"div",4)(32,"mat-form-field",5)(33,"mat-label"),c(34),a(35,"translate"),n(),S(36,"input",12),a(37,"translate"),y(38,xe,3,3,"mat-error",7),n()(),d(39,"div",13)(40,"mat-form-field",5)(41,"mat-label"),c(42),a(43,"translate"),n(),S(44,"textarea",14),a(45,"translate"),y(46,ke,3,3,"mat-error",7),n()(),y(47,Be,4,4,"div",15),d(48,"div",13)(49,"div",16),y(50,Me,3,3,"button",17)(51,qe,3,3,"button",18)(52,Pe,3,3,"button",19),n()()()()()),o&2){let f,g,b,_;r(2),s(l(3,25,"form.label.update")),r(2),p("formGroup",i.productForm),r(5),s(l(10,27,"form.title.label")),r(2),p("readonly",!i.editEnabled())("placeholder",l(12,29,"form.title.placeholder")),r(2),p("ngIf",((f=i.productForm.get("title"))==null?null:f.getError("required"))&&((f=i.productForm.get("title"))==null?null:f.touched)),r(4),s(l(18,31,"form.category.label")),r(2),p("disabled",!i.editEnabled())("placeholder",l(20,33,"form.category.placeholder")),r(2),j(i.categories),r(5),s(l(27,35,"form.price.label")),r(2),p("readonly",!i.editEnabled())("placeholder",l(29,37,"form.price.placeholder")),r(2),p("ngIf",((g=i.productForm.get("price"))==null?null:g.getError("required"))&&((g=i.productForm.get("price"))==null?null:g.touched)),r(4),s(l(35,39,"form.discount.label")),r(2),p("readonly",!i.editEnabled())("placeholder",l(37,41,"form.discount.placeholder")),r(2),p("ngIf",((b=i.productForm.get("discount"))==null?null:b.getError("required"))&&((b=i.productForm.get("discount"))==null?null:b.touched)),r(4),s(l(43,43,"form.description.label")),r(2),p("readonly",!i.editEnabled())("placeholder",l(45,45,"form.description.placeholder")),r(2),p("ngIf",((_=i.productForm.get("description"))==null?null:_.getError("required"))&&((_=i.productForm.get("description"))==null?null:_.touched)),r(),p("ngIf",i.path=="/inventory"),r(3),p("ngIf",!(i.editEnabled()||i.editQtyEnabled())),r(),p("ngIf",i.editEnabled()||i.editQtyEnabled()),r(),p("ngIf",i.editEnabled()||i.editQtyEnabled())}},dependencies:[ee,L,G,W,R,O,Y,X,de,le,ne,ae,se,ce,te,J,K,U,oe,re,z,Q,me,pe,ie,he,ge]})}}return e})();export{_e as a,ve as b,ot as c};
