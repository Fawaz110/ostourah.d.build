import{a as R}from"./chunk-QSA5FGAP.js";import{b as N,c as P}from"./chunk-DXAKQD4J.js";import{a as J}from"./chunk-AYPWSZRO.js";import{a as V,b as f}from"./chunk-ISXB7HXH.js";import{a as D}from"./chunk-JWRZONS3.js";import"./chunk-CAIS2L7Q.js";import{U as O,W as S,ca as G,ea as L}from"./chunk-HFL7CNX7.js";import{d as g,t as z,u as H,v as q}from"./chunk-AM7733XC.js";import"./chunk-KZPEUG5X.js";import"./chunk-NB6J7F7F.js";import"./chunk-YVATBKZN.js";import{$b as u,Aa as M,Ab as C,Eb as v,Kb as p,Mb as w,Nb as B,Ob as $,Pb as n,Qb as o,Rb as s,Vb as j,Y as k,_b as T,b as I,ca as A,eb as E,ha as F,jb as l,jc as a,kb as d,kc as x,oa as h,rc as b,za as y}from"./chunk-NURSLYAJ.js";import{a as U}from"./chunk-EQDQRRRY.js";var Q=(()=>{class t{constructor(e,i){this.data=e,this._FormBuilder=i}ngOnInit(){console.log(this.data),this.form=this._FormBuilder.group({name:[this.data.name,[g.required]],gender:[this.data.gender,[g.required]],email:[this.data.email,[g.required,g.email]],birthday:[this.data.birthday,[g.required]]})}static{this.\u0275fac=function(i){return new(i||t)(d(N),d(z))}}static{this.\u0275cmp=h({type:t,selectors:[["app-user-form"]],standalone:!0,features:[b],decls:5,vars:0,consts:[[1,"p-5"],[1,"inner","grid","grid-cols-12"],[1,"col-span-12","md:col-span-6"]],template:function(i,r){i&1&&(n(0,"section",0)(1,"div",1),s(2,"div",2)(3,"div",2)(4,"div",2),o()())},dependencies:[H,q,L,G,S]})}}return t})();var W=(()=>{class t{constructor(e,i){this._HttpClient=e,this._CookieService=i}getAll(e=1,i=10,r=void 0,c=void 0){return this._HttpClient.get(f.baseUrl+`user?page=${e}&limit=${i}${r!=null?"&sort="+r:""}${c!=null?"&gender="+c:""}`,{headers:{Authorization:"Bearer "+this._CookieService.get(f.token),lang:localStorage.getItem("lang")}})}getUser(e){return this._HttpClient.get(f.baseUrl+"user/"+e,{headers:{Authorization:"Bearer "+this._CookieService.get(f.token),lang:localStorage.getItem("lang")}})}block(e){return this._HttpClient.patch(f.baseUrl+"user/blockUser/"+e,null,{headers:{Authorization:"Bearer "+this._CookieService.get(f.token),lang:localStorage.getItem("lang")}})}static{this.\u0275fac=function(i){return new(i||t)(F(D),F(V))}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Y(t,m){if(t&1&&s(0,"img",16),t&2){let e=u(2).$implicit;v("alt",e.name+" image")}}function Z(t,m){if(t&1&&s(0,"img",17),t&2){let e=u(2).$implicit;v("alt",e.name+" image")}}function ee(t,m){if(t&1&&C(0,Y,1,1,"img",16)(1,Z,1,1,"img",17),t&2){let e=u().$implicit;p(e.gender=="male"?0:-1),l(),p(e.gender=="female"?1:-1)}}function te(t,m){if(t&1&&s(0,"img",7),t&2){let e=u().$implicit;v("src",e.profileImg,E)("alt",e.name+" image")}}function ie(t,m){t&1&&s(0,"i",13)}function ne(t,m){t&1&&(n(0,"span"),a(1,"_"),o())}function oe(t,m){if(t&1){let e=j();n(0,"tr",4),s(1,"td",3),n(2,"td",3)(3,"figure",6),C(4,ee,2,2)(5,te,1,2,"img",7),o()(),n(6,"td",8)(7,"div",9)(8,"h3",10),a(9),o(),n(10,"span",11),a(11),o(),n(12,"span",11),a(13),o()()(),n(14,"td",12),C(15,ie,1,0,"i",13)(16,ne,2,0,"span"),o(),n(17,"td",12)(18,"button",14),T("click",function(){let r=y(e).$implicit,c=u();return M(c.update(r))}),a(19,"Update"),o()(),n(20,"td",12)(21,"button",15),T("click",function(){let r=y(e).$implicit,c=u();return M(c.block(r.id))}),a(22,"Block"),o()()()}if(t&2){let e=m.$implicit;l(4),p(e.profileImg==null?4:-1),l(),p(e.profileImg!=null?5:-1),l(4),x(e.name),l(2),x(e.email),l(2),x(e.phone),l(2),p(e.accountActive?15:-1),l(),p(e.accountActive?-1:16)}}var Se=(()=>{class t{constructor(e,i,r){this._UserService=e,this._MatDialog=i,this._ToastrService=r,this.users=[]}ngOnInit(){this.getAll()}getAll(e=1,i=10,r=void 0,c=void 0){this._UserService.getAll(e,i,r,c).pipe(k(_=>{this.users=_.data.users,this.pagination=_.data.pagination})).subscribe(I,_=>console.log(_))}update(e){this._MatDialog.open(Q,{data:U({},e)}).afterClosed().subscribe(r=>{r=="updated"?this._ToastrService.success(localStorage.getItem("lang")?.includes("en")?"User updated successfully":"\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"):this._ToastrService.error(localStorage.getItem("lang")?.includes("en")?"Nothing updated":"\u0644\u0645 \u064A\u062A\u0645 \u0627\u062A\u0645\u0627\u0645 \u0627\u0644\u0639\u0645\u0644\u064A\u0629")})}block(e){this._MatDialog.open(R,{data:{message:localStorage.getItem("lang")?.includes("en")?"Are you sure to block the user?":"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0638\u0631 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u061F"}}).afterClosed().subscribe(r=>{r&&this.blockUser(e)})}blockUser(e){this._UserService.block(e).pipe(k(i=>{console.log(i),this._ToastrService.success(localStorage.getItem("lang")?.includes("en")?"Blocked user successfully":"\u062A\u0645 \u062D\u0638\u0631 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0628\u0646\u062C\u0627\u062D")})).subscribe(I,i=>console.log(i))}static{this.\u0275fac=function(i){return new(i||t)(d(W),d(P),d(J))}}static{this.\u0275cmp=h({type:t,selectors:[["app-clients"]],standalone:!0,features:[b],decls:23,vars:0,consts:[[1,"w-full"],[1,"bg-gray-100","font-bold","border-b"],[1,"p-4","border-b","text-start"],[1,"p-4","border-b"],[1,"hover:bg-gray-100","duration-100"],["colspan","6",1,"p-4"],[1,"size-16","rounded-full","overflow-hidden"],[1,"w-full",3,"src","alt"],[1,"p-4","border-b","flex","gap-5"],[1,"main-info","flex","flex-col"],[1,"text-lg","font-bold","tracking-tight","mb-2"],[1,"text-gray-400"],[1,"p-4","border-b","text-center"],[1,"pi","pi-verified","text-lg","text-blue-800"],["mat-flat-button","",3,"click"],["mat-flat-button","","color","warn",3,"click"],["src","male.png",1,"w-full",3,"alt"],["src","female.png",1,"w-full",3,"alt"]],template:function(i,r){i&1&&(n(0,"section")(1,"table",0)(2,"thead")(3,"tr",1),s(4,"th",2),n(5,"th",2),a(6,"Image"),o(),n(7,"th",2),a(8,"User Info"),o(),n(9,"th",3),a(10,"Account Activated"),o(),n(11,"th",3),a(12,"Update"),o(),n(13,"th",3),a(14,"Block"),o()()(),n(15,"tbody"),B(16,oe,23,7,"tr",4,w),o(),n(18,"tfoot")(19,"tr")(20,"td",5)(21,"p"),a(22,"Pagination here !"),o()()()()()()),i&2&&(l(16),$(r.users))},dependencies:[S,O]})}}return t})();export{Se as ClientsComponent};
